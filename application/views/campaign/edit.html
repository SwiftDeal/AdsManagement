<div class="content-page">
    <!-- Start content -->
    <div class="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <ol class="breadcrumb pull-right">
                            <li><a href="/admin">Dashboard</a></li>
                            <li class="active">Create Campaign</li>
                        </ol>
                        <h4 class="page-title">Welcome !</h4>
                    </div>
                </div>
            </div>
            <div class="row">
                {if isset($message)}
                <div class="alert alert-info alert-dismissible fade in" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                    {echo $message}
                </div>
                {/if}
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body no-padding">
                            <form method="post" action="" enctype="multipart/form-data">
                                <div class="panel panel-default panel-body">
                                    {foreach $f in $fields}
                                    <div class="form-group">
                                        <label>{echo $f['placeholder']}</label>
                                        <input type="{echo $f['type']}" {echo $f['html'] . ' ' . $f['pattern']} class="form-control" value="{echo $c->$f['name']}" name="{echo $f['name']}">
                                        {echo Shared\Markup::errors($errors, $f['name'])}
                                    </div>
                                    {/foreach}
                                    <div class="form-group">
                                        <label>Image</label>
                                        <img src="{echo CDN}uploads/images/{echo $c->image}" class="img-thumbnail">
                                        <input type="file" class="form-control" name="image" {if !$c->image}required=""{/if}>
                                        <span class="help-block text-danger">Image should be 650px X 315px for good reach on Social Media<br>{echo Shared\Markup::errors($errors, "image")}</span>
                                    </div>
                                    <div class="form-group">
                                        <label>Category</label>
                                        {script $categories = []}
                                        {foreach $cat in $c->category}
                                            {script $categories[] = Shared\Utils::getMongoID($cat)}
                                        {/foreach}
                                        <select name="category[]" data-value='{echo json_encode($categories)}' class="selectVal form-control selectpicker" multiple="" data-live-search=true title="Choose a campaign category">
                                            {foreach $cat in $adCategories}
                                            <option value="{echo $cat->_id}">{echo $cat->name}</option>
                                            {/foreach}
                                        </select>
                                        <span class="help-block text-danger">{echo Shared\Markup::errors($errors, "category")}</span>
                                    </div>
                                    <div class="form-group">
                                        <label>Model</label>
                                        <select name="model" required="" value="{echo $comm->model}" class="form-control">
                                            <option value="cpc" selected="">CPC</option>
                                            <option value="cpm">CPM</option>
                                        </select>
                                        <span class="help-block text-danger">{echo Shared\Markup::errors($errors, "model")}</span>
                                    </div>
                                    <div class="form-group">
                                        <label>Model Rate %</label>
                                        <input type="text" value="{echo $comm->rate}" name="rate" pattern="^[0-9]{1,2}(\.[0-9]{0,6})?$" class="form-control" placeholder="Rate for revenue model. Eg: 2.3" required="">
                                        <span class="help-block text-danger">{echo Shared\Markup::errors($errors, "rate")}</span>
                                    </div>
                                    <input type="hidden" name="action" value="update">
                                    <button type="submit" class="btn btn-primary pull-right"><i class="fa fa-check-circle"></i> Create</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row well">
                        <div data-spy="affix" data-offset-top="60" data-offset-bottom="200">
                            <div class="row-fluid">
                                <div class="col-sm-4">
                                    <img src="{echo CDN}uploads/images/{echo $c->image}" class="img-responsive">
                                </div>
                                <div class="col-sm-8">
                                    <a href="{echo $c->url}"><b>{echo $c->title}</b></a>
                                    <p>{echo $c->description}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>